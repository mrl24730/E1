function Class(){}Class.prototype.construct=function(){};Class.extend=function(e){var a=function(){if(arguments[0]!==Class){this.construct.apply(this,arguments);
}};var d=new this(Class);var b=this.prototype;for(var f in e){var c=e[f];if(c instanceof Function){c.$=b;}d[f]=c;}a.prototype=d;a.extend=this.extend;return a;
};var instagramClass=Class.extend({gallery:null,masonry:null,loading:false,apiDataCount:5,paging:0,theEnd:false,api:{hashTag:"/api/getIGList.ashx",approval:"api/setIGDisplay.ashx"},construct:function(){},initUI:function(){var b=this;
this.gallery=arguments[0];$(".loadingWrapper").imagesLoaded();$(window).bind("mousewheel wheel",function(c){$(window).scroll();});var a=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";
if(document.attachEvent){document.attachEvent("on"+a,function(){$(window).scroll();});}$(window).scroll(function(){if($(window).scrollTop()>=$(document).height()-$(window).height()-20){b.getMore();
}});b.getHashTag();if($.urlParam("idx_photo")){b.getHashTag($.urlParam("idx_photo"));}$(document).on("click",".item",function(){b.setApproval($(this));
});},resetProperty:function(){var b=this;var a=$("#gallery-wrap").find(".item");b.paging=1;b.theEnd=false;},getMore:function(){var a=this;a.getHashTag();
},getHashTag:function(d){var b=this;if(!d&&(b.loading||b.theEnd)){return;}b.setLoading(true);var c={r:new Date().getTime()};if(d){c.idx_photo=d;}else{c.paging=b.paging;
}var a=b.api.hashTag;if(adminMode){a+="?adminMode="+adminMode;}$.ajax({url:a,type:"POST",dataType:"json",cache:false,data:c,success:function(e){if(d){var f=b.venderGrid(e[0]);
$("#popup").empty();$("#popup").append(f);$.magnificPopup.open({items:{src:"#popup"},type:"inline"});}else{b.venderContent({data:e});b.paging++;}if(e.length==0){b.theEnd=true;
}}});},venderContent:function(f){var e=this;var g=$("<div/>");for(var c=0;c<f.data.length;c++){var b=f.data[c];var d=e.venderGrid(b);g.append(d);}var a=g.find(".item");
$("#gallery-wrap").append(a);$("#gallery-wrap").imagesLoaded(function(){console.log("reload");e.setLoading(false);}).progress(function(h,i){if(i.isLoaded===false){a=a.not($(i.img).parent());
$(i.img).parent().remove();}});},venderGrid:function(b){var d=this;var c=$("<div/>");var a=$("<img/>");c.addClass("item");c.attr("data-idx-photo",b.idx_photo);
a.attr("src",b.photo_low);c.attr("data-href",b.photo_std);var e=$("<div/>");e.addClass("desc");c.append(e);c.append(a);d.setApprovalDisplay(c,b.is_display);
return c;},setApproval:function(b){var a=b.find(".rejected").length==0;this.setApprovalAPI(b.attr("data-idx-photo"),!a);this.setApprovalDisplay(b,!a);if(b.parents("#popup").length>0){var c=$("#gallery-wrap").find(".item[data-idx-photo='{0}']".replace("{0}",b.attr("data-idx-photo")));
if(c.length>0){this.setApprovalDisplay(c,!a);}}},setApprovalAPI:function(d,a){var b=this;var c={idx_photo:d,is_display:a};$.ajax({url:b.api.approval,type:"GET",dataType:"json",cache:false,data:c,success:function(e){}});
},setApprovalDisplay:function(b,a){var d=b.find(".remark");var c=d.find(".ico");if(d.length<1){d=$("<div/>");d.addClass("remark");c=$("<span/>");c.addClass("ico");
d.append(c);b.append(d);}c.removeClass("rejected");if(a){c.html("&#10004");}else{c.html("&#10008");c.addClass("rejected");}},setLoading:function(a){var b=this;
b.loading=a;if(a){$(".loadingSpin").show();}else{$(".loadingSpin").hide();}},getGridSize:function(){var b=this;var a=(Math.floor(Math.random()*10)>7);return a;
},shuffle:function(d){for(var b,a,c=d.length;c;b=Math.floor(Math.random()*c),a=d[--c],d[c]=d[b],d[b]=a){}return d;}});$.urlParam=function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);
if(!b){return 0;}return b[1]||0;};